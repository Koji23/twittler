<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Jordan's Twittler</title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <header>
      <h1>Twittler</h1>
    </header>
    <main>
      <button>Refresh</button>
      <ul class="feed"></ul>
    </main>
    <footer></footer>
    <script>

      $(document).ready(function(){
        var $feed = $('main').find('ul');
        $feed.html("");
        var nextIndex = streams.home.length;
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<li></li>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          $tweet.appendTo($feed);
          index -= 1;
        }
        
        function addNew(){
          for(index = nextIndex; index <= streams.home.length-1; index++){
            var newTweet = streams.home[index];
            var $newTweet = $('<li></li>');
            $newTweet.text('@' + newTweet.user + ':' + newTweet.message);
            $newTweet.prependTo($feed);
          }
        }
        $('main').on('click', 'button', addNew);
        setInterval(addNew, 3000);
      });
    </script>  
  </body>
</html>
